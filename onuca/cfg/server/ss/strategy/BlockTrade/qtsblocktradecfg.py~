#coding=utf-8
from qtscommon import *
#///////////////////////////////////////////////////////////////////////////////////
QTS_CONFIG_TRADE_PREFIX = 'BlockTrade'
InitCfgEnv(QTS_SS_CFG_FILE,QTS_CONFIG_TRADE_PREFIX)
#///////////////////////////////////////////////////////////////////////////////////
CreateInstruments(QTS_CONFIG_TRADE_PREFIX)
CreateParameters(QTS_CONFIG_TRADE_PREFIX)
CreateComments(QTS_CONFIG_TRADE_PREFIX)
CreateCommands(QTS_CONFIG_TRADE_PREFIX)
#///////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////
#add code
#要交易的标的，现暂时支持一个交易代码
CreateInstrument(QTS_CONFIG_TRADE_PREFIX,100,'TradeCode',QTS_TRADE_CODE,SZ_MARKET,EQUIT_CATEGORY,1,0,mode=QTS_INSTRUMENT_MODE_BP)
#对冲的标的，暂不支持对冲
CreateInstrument(QTS_CONFIG_TRADE_PREFIX,101,'HedgeCode',QTS_TRADE_CODE,ZJ_MARKET,IF_CATEGORY,1507,1,mode=QTS_INSTRUMENT_MODE_BP)
#///////////////////////////////////////////////////////////////////////////////////
#可修改参数
#///////////////////////////////////////////////////////////////////////////////////
#BUY的距离市场价的档位
CreateParameter(QTS_CONFIG_TRADE_PREFIX,200,'Wide.B',2,0,1,save=QTS_TRUE)
#BUY的要挂的层数
CreateParameter(QTS_CONFIG_TRADE_PREFIX,201,'Depth.B',1,0,2,save=QTS_TRUE)
#BUG的每层的量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,202,'Qty.B',2000,0,3,save=QTS_TRUE)
#BUG的每一层小与这个量时，不参挂
CreateParameter(QTS_CONFIG_TRADE_PREFIX,203,'Keep.B',500,0,4,save=QTS_TRUE)
#BUG的挂单最大的价格，挂单定在这个价格下，如果是0，则此控制无效
CreateParameter(QTS_CONFIG_TRADE_PREFIX,204,'UPrice.B',0,0,5,save=QTS_TRUE)
#BUG的最大交易量，如果大于这个量，将不在挂单，如果是0，则此控制无效
CreateParameter(QTS_CONFIG_TRADE_PREFIX,205,'MaxVol.B',10000,0,6,save=QTS_TRUE)
#BUG的最大交易金额，如果大于这个量，将不在挂单，如果是0，则此控制无效
CreateParameter(QTS_CONFIG_TRADE_PREFIX,206,'MaxAmount.B',0,0,7,save=QTS_TRUE)

#SELL的距离市场价的档位
CreateParameter(QTS_CONFIG_TRADE_PREFIX,210,'Wide.S',2,0,10,save=QTS_TRUE)
#SELL的要挂的层数
CreateParameter(QTS_CONFIG_TRADE_PREFIX,211,'Depth.S',1,0,11,save=QTS_TRUE)
#SELL的每层的量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,212,'Qty.S',2000,0,12,save=QTS_TRUE)
#SELL的每一层小与这个量时，不参挂
CreateParameter(QTS_CONFIG_TRADE_PREFIX,213,'Keep.S',500,0,13,save=QTS_TRUE)
#SELL的挂单最小的价格，挂单定在这个价格上，如果是0，则此控制无效
CreateParameter(QTS_CONFIG_TRADE_PREFIX,214,'UPrice.S',0,0,14,save=QTS_TRUE)
#SELL的最大交易量，如果大于这个量，将不在挂单，如果是0，则此控制无效
CreateParameter(QTS_CONFIG_TRADE_PREFIX,215,'MaxVol.S',10000,0,15,save=QTS_TRUE)
#SELL的最大交易金额，如果大于这个量，将不在挂单，如果是0，则此控制无效
CreateParameter(QTS_CONFIG_TRADE_PREFIX,216,'MaxAmount.S',0,0,16,save=QTS_TRUE)

#主动单的量，如果为0，则以市场量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,220,'StackerQty',0,0,20,save=QTS_TRUE)
#若是主动是第一层，则要保留的量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,221,'KeepQty',1000,0,21,save=QTS_TRUE)
#主动单多少层
CreateParameter(QTS_CONFIG_TRADE_PREFIX,222,'TackerLevel',0,0,22,save=QTS_TRUE,mode=QTS_COMPONENT_COMBOX,component='0:一层,1:二层,2:三层')
#每一笔单拆单个数
CreateParameter(QTS_CONFIG_TRADE_PREFIX,223,'SplitCount',3,0,23,save=QTS_TRUE)
#拆单最大与最小的比，些数非常大时，会出现等比拆单
CreateParameter(QTS_CONFIG_TRADE_PREFIX,224,'SplitPara',30,2,24,save=QTS_TRUE)
#初始完成的交易量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,225,'InitVol',0,0,25,save=QTS_TRUE)
#对冲的订单单笔交易量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,226,'HedgeQty',0,0,26,save=QTS_TRUE)
#对冲计算的取整参数，是一个0到1之间的数，如果为0，就是不对冲，1是要完全对冲。
CreateParameter(QTS_CONFIG_TRADE_PREFIX,227,'HedgeFactor',0,2,27,save=QTS_TRUE)
#目标完成率，相对于交易标的的市场成交量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,228,'TargetRate',50,2,28,save=QTS_TRUE)
#目标完成率，相对于交易标的的市场成交量
CreateParameter(QTS_CONFIG_TRADE_PREFIX,229,'TargetAction',0,0,29,save=QTS_TRUE,mode=QTS_COMPONENT_COMBOX,component='0:买,1:卖')
#///////////////////////////////////////////////////////////////////////////////////
#不可修改参数
#///////////////////////////////////////////////////////////////////////////////////
#要交易的总的交易量
CreateComment(QTS_CONFIG_TRADE_PREFIX,300,'TotalVol',1000000,0,1)
#单笔最大的单量
CreateComment(QTS_CONFIG_TRADE_PREFIX,301,'MaxOrder',10000,0,2)
#当前的市场交易量
CreateComment(QTS_CONFIG_TRADE_PREFIX,302,'MarketVol',0,0,3)
#完成的交易量
CreateComment(QTS_CONFIG_TRADE_PREFIX,303,'CplVol',0,0,4)
#当前完成交易量与总的交易比
CreateComment(QTS_CONFIG_TRADE_PREFIX,304,'CplORate',0,0,5)
#当前完成交易量与市场交易量比
CreateComment(QTS_CONFIG_TRADE_PREFIX,305,'CplMRate',0,0,6)
#交易标的当前仓位
CreateComment(QTS_CONFIG_TRADE_PREFIX,306,'TradePos',0,0,7)
#对冲标的当前仓位
CreateComment(QTS_CONFIG_TRADE_PREFIX,307,'HedgePos',0,0,8)
#对冲系数
CreateComment(QTS_CONFIG_TRADE_PREFIX,308,'HedgeRatio',30000,0,9)
#目标完成交易量
CreateComment(QTS_CONFIG_TRADE_PREFIX,309,'TargetVol',0,0,10)
#与市场交易量最大的差距
CreateComment(QTS_CONFIG_TRADE_PREFIX,310,'MaxVolDiff',10000000,0,11)
#与市场交易量实际的差距
CreateComment(QTS_CONFIG_TRADE_PREFIX,311,'RelVolDiff',0,0,12)
#发出较高的延迟
CreateComment(QTS_CONFIG_TRADE_PREFIX,312,'WarningTime',30,0,13)
#未对冲的交易量
CreateComment(QTS_CONFIG_TRADE_PREFIX,313,'UnHedgeTradePos',0,0,14)
#未下单的对冲量
CreateComment(QTS_CONFIG_TRADE_PREFIX,314,'UnOrderHedgePos',0,0,15)
#买价与市场价的比值
CreateComment(QTS_CONFIG_TRADE_PREFIX,315,'Bid/Market',0,4,16)
#卖价与市场价的比值
CreateComment(QTS_CONFIG_TRADE_PREFIX,316,'Ask/Market',0,4,17)
#是否充许对冲
CreateComment(QTS_CONFIG_TRADE_PREFIX,317,'IsHedge',QTS_TRUE,0,18)
#算法ID
CreateComment(QTS_CONFIG_TRADE_PREFIX,320,'AlgoId',GetPluginIdForAlgo(2),0,20)

#///////////////////////////////////////////////////////////////////////////////////
#命令参数
#///////////////////////////////////////////////////////////////////////////////////
#增加BUY的距离市场价的档位，步进是1
CreateCommand(QTS_CONFIG_TRADE_PREFIX,400,'Wide.B+',1)
#减少BUY的距离市场价的档位，步进是1
CreateCommand(QTS_CONFIG_TRADE_PREFIX,401,'Wide.B-',2)
#增加BUY的要挂的层数
CreateCommand(QTS_CONFIG_TRADE_PREFIX,402,'Depth.B+',3)
#减少BUY的要挂的层数
CreateCommand(QTS_CONFIG_TRADE_PREFIX,403,'Depth.B-',4)

#增加SELL的距离市场价的档位，步进是1
CreateCommand(QTS_CONFIG_TRADE_PREFIX,410,'Wide.S+',10)
#减少SELL的距离市场价的档位，步进是1
CreateCommand(QTS_CONFIG_TRADE_PREFIX,411,'Wide.S-',11)
#增加BUY的要挂的层数
CreateCommand(QTS_CONFIG_TRADE_PREFIX,412,'Depth.S+',12)
#减少BUY的要挂的层数
CreateCommand(QTS_CONFIG_TRADE_PREFIX,413,'Depth.S-',13)

#主动买单命令
CreateCommand(QTS_CONFIG_TRADE_PREFIX,420,'Tacker.B',20)
#主动卖单命令
CreateCommand(QTS_CONFIG_TRADE_PREFIX,421,'Tacker.S',21)

#买对冲
CreateCommand(QTS_CONFIG_TRADE_PREFIX,430,'Hedge.B',22)
#卖对冲
CreateCommand(QTS_CONFIG_TRADE_PREFIX,431,'Hedge.S',23)
#///////////////////////////////////////////////////////////////////////////////////